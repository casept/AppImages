app: Blender 

ingredients:
  script:
    # The official site has a crappy redirect instead of the actual file, use a mirror
    # FIXME: Version is currently hardcoded
    - URL="http://ftp.halifax.rwth-aachen.de/blender/release/Blender2.78/blender-2.78c-linux-glibc219-x86_64.tar.bz2"
    - wget -c $URL
    - ls blender-*.bz2 | cut -d "-" -f 2 > VERSION

script:
  - tar xf ../*.tar.bz2
  - mv blender-*/* ./usr/bin/
  - rm -r blender*
  - cp ./usr/bin/icons/scalable/apps/blender.svg .
  # Create .desktop file
  - cat > blender.desktop <<\EOF
  - [Desktop Entry]
  - Name=Blender
  - GenericName=3D modeler
  - Comment=3D modeling, animation, rendering and post-production
  - Keywords=3d;cg;modeling;animation;painting;sculpting;texturing;video editing;video tracking;rendering;render engine;cycles;game engine;python;
  - Exec=blender %f
  - Icon=blender
  - Terminal=false
  - Type=Application
  - Categories=Graphics;3DGraphics;
  - MimeType=application/x-blender;
  - EOF
  # Create appdata file
  # TODO: Inline this file
  - mkdir -p ./usr/share/metainfo/
  - wget -q "https://raw.githubusercontent.com/hughsie/fedora-appstream/c2f5ca821119f4ba781bdab3182fe6d6ae11fddc/appdata-extra/desktop/blender.appdata.xml" -O ./usr/share/metainfo/blender.appdata.xml
